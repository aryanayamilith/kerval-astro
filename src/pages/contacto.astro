---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout 
  title="Contacto | Asesoramiento Financiero en España | Kerval Advisory Partners"
  description="Contacta con Kerval Advisory Partners, firma de asesoramiento financiero en España especializada en M&A, valoración y estrategia empresarial."
>

  <!-- HERO / CABECERA -->
  <section 
    style="background: url('/images/banner-contacto.jpg') center/cover no-repeat; position: relative; padding: 4rem 2rem 6rem; color: #fff; font-family: 'Calibri', sans-serif;"
  >
    <!-- Overlay azul -->
    <div style="background-color: rgba(0,32,96,0.85); position: absolute; inset: 0; z-index: 0;"></div>

    <!-- Contenido -->
    <div style="position: relative; z-index: 1; display: flex; flex-wrap: wrap; gap: 3rem; max-width: 1200px; margin: auto; align-items: flex-start;">

      <!-- Columna izquierda -->
      <div style="flex: 1; min-width: 280px;">
        <h1 class="titulo-contacto">Contacto</h1>
        
        <h3 style="font-size: 1.2rem; margin-bottom: 0.5rem;">Dirección</h3>
        <p style="margin-bottom: 0.3rem;">Av. de la Institución Libre de Enseñanza, 37A, planta 3ª</p>
        
        <h3 style="font-size: 1.2rem; margin-top: 1rem; margin-bottom: 0.5rem;">Teléfonos</h3>
        <p style="margin-bottom: 0.3rem;">+34 91 457 50 23</p>
        <p style="margin-bottom: 1rem;">+34 655 353 336</p>

        <!-- LinkedIn -->
        <div class="social-links">
          <a href="https://www.linkedin.com/company/kerval-advisory-partners" target="_blank" rel="noopener noreferrer">
            <img src="/images/icons/linkedin.svg" alt="LinkedIn" class="social-icon" />
          </a>
        </div>
      </div>

      <!-- Columna derecha (Formulario) -->
      <div style="flex: 1; min-width: 320px;">
        <form id="contact-form" method="POST" novalidate class="contact-form">
          <input type="text"   name="name"    placeholder="Nombre"  required />
          <input type="email"  name="email"   placeholder="Correo"  required />
          <input type="text"   name="company" placeholder="Empresa" />
          <input type="text"   name="subject" placeholder="Asunto" />
          <textarea name="message" placeholder="Mensaje" rows="5" required></textarea>

          <!-- Checkboxes con enlaces legales -->
          <label class="check">
            <input type="checkbox" required />
            Acepto la
            <a href="/privacidad" target="_blank" rel="noopener noreferrer">
              Política de Privacidad
            </a>
          </label>

          <label class="check">
            <input type="checkbox" required />
            Acepto los
            <a href="/terminos-uso" target="_blank" rel="noopener noreferrer">
              Términos de Uso
            </a>
          </label>

          <!-- Botón enviar -->
          <button type="submit">Enviar</button>
        </form>
      </div>
    </div>
  </section>

  <!-- POPUP de confirmación -->
  <div id="popup" class="popup">
    <div class="popup__box">
      <p id="popup-message" class="popup__message"></p>
      <button id="close-popup" class="popup__btn">Cerrar</button>
    </div>
  </div>

  <style>
    * {
      font-family: 'Calibri', sans-serif;
    }

    .titulo-contacto {
      font-weight: bold;
      font-size: 3rem;
      margin-bottom: 2rem;
      margin-top: 1rem; /* menos espacio en desktop */
      text-align: left;
    }

    @media (max-width: 768px) {
      .titulo-contacto {
        text-align: center;
        font-size: 2.4rem;
        margin-top: 0.5rem; /* aún más reducido en mobile */
      }
    }

    .contact-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .contact-form input,
    .contact-form textarea {
      padding: 0.8rem;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
    }

    .contact-form button {
      background: #c00000;
      color: #fff;
      font-weight: bold;
      padding: 0.8rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 1rem;
      width: 60%;
      max-width: 280px;
      align-self: center;
      transition: all 0.3s ease;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25);
    }

    .contact-form button:hover {
      background: #a00000;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(192, 0, 0, 0.4);
    }

    @media (max-width: 768px) {
      .contact-form button {
        width: 70%;
        max-width: 240px;
      }
    }

    .check {
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #fff;
      flex-wrap: wrap;
    }

    .check a {
      color: #fff;
      text-decoration: underline;
    }

    .social-icon {
      width: 32px;
      height: 32px;
      transition: transform 0.2s ease, filter 0.2s ease;
    }

    .social-icon:hover {
      transform: scale(1.1);
      filter: brightness(0) saturate(100%) invert(20%) sepia(90%) saturate(6000%) hue-rotate(350deg) brightness(95%) contrast(105%);
    }

    .popup {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .popup.active {
      display: flex;
      opacity: 1;
    }

    .popup__box {
      background: #fff;
      border-radius: 12px;
      padding: 2rem;
      max-width: 420px;
      text-align: center;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }

    .popup.active .popup__box {
      transform: scale(1);
    }

    .popup__message {
      color: #002060;
      margin: 0 0 1rem 0;
      line-height: 1.5;
    }

    .popup__btn {
      background: #c00000;
      color: #fff;
      border: 0;
      border-radius: 6px;
      padding: 0.6rem 1.2rem;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.2s ease;
    }

    .popup__btn:hover {
      background: #a00000;
    }
  </style>

  <script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
      const form = document.getElementById("contact-form");
      const popup = document.getElementById("popup");
      const popupMsg = document.getElementById("popup-message");
      const closePopup = document.getElementById("close-popup");
      const endpoint = "https://formspree.io/f/xqaylnzo";

      if (!form || !popup || !popupMsg || !closePopup) return;

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        try {
          const res = await fetch(endpoint, {
            method: "POST",
            body: formData,
            headers: { Accept: "application/json" },
          });

          if (res.ok) {
            form.reset();
            popupMsg.textContent = "¡Gracias! Tu mensaje ha sido enviado correctamente.";
          } else {
            popupMsg.textContent = "Ocurrió un error. Por favor, inténtalo de nuevo.";
          }

          popup.classList.add("active");
        } catch (error) {
          popupMsg.textContent = "Error de conexión. Inténtalo más tarde.";
          popup.classList.add("active");
        }
      });

      closePopup.addEventListener("click", () => {
        popup.classList.remove("active");
      });
    });
  </script>

</BaseLayout>
